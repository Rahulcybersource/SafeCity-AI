import speech_recognition as sr
from config import MAX_RECORDING_TIME

def capture_audio():
    """Capture audio from microphone (works locally only)."""
    try:
        recognizer = sr.Recognizer()
        with sr.Microphone() as source:
            audio = recognizer.listen(source, timeout=MAX_RECORDING_TIME)
        text = recognizer.recognize_google(audio)
        return text
    except Exception as e:
        return None

def process_voice_input():
    """Process voice input and return message."""
    message = capture_audio()
    if message:
        return message
    return "Emergency alert triggered"
